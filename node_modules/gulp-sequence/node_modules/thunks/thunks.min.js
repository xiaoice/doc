!function(n,r){"use strict";"object"==typeof module&&module.exports?module.exports=r():"function"==typeof define&&define.amd?define([],r):n.thunks=r()}("object"==typeof window?window:this,function(){"use strict";function n(n){return"function"==typeof n}function r(r){return n(r)&&r._isThunk===s}function t(n,r){if(r=r||0,r>=n.length)return[];for(var t=n.length,u=Array(t-r);t-->r;)u[t-r]=n[t];return u}function u(n,r,t){if(t)for(var u=0,e=n.length;e>u;u++)r(n[u],u,n);else for(var l in n)n.hasOwnProperty(l)&&r(n[l],l,n)}function e(n,r,t){var u={error:null,value:null};try{u.value=r.apply(n,t)}catch(e){u.error=e}return u}function l(r){return r?(n(r)?r=o(r):n(r.toThunk)?r=o(r.toThunk()):n(r.then)&&(r=o(c(r))),r):r}function o(n){return n._isThunk=s,n}function i(n){return function(o){var i,c=1,a=!1,f=v(n);if(f?i=Array(n.length):n&&"object"==typeof n&&(i={}),!i)return o(new Error("Not array or object"));var s=e(null,function(n,r){return u(n,r,f),--c||a?void 0:o(null,i)},[n,function(n,u){return a?void 0:(c++,n=l(n),r(n)?(n(function(n,r){return a?void 0:null!=n?(a=!0,o(n)):(i[u]=arguments.length>2?t(arguments,1):r,--c||o(null,i))}),void 0):(i[u]=n,--c||o(null,i)))}]);s.error&&(a=!0,o(s.error))}}function c(n){return function(r){return n.then(function(n){r(null,n)},r)}}function a(n,t,u){function o(){return f.result!==!1?(f.result=arguments.length?arguments:[null],f.callback?a(n,f):void 0):void 0}var i,c=t.result,f=t.next,s=n.onerror||o;if(t.result=!1,n.debug&&!u&&n.debug.apply(null,c),null!=c[0]&&(c=[c[0]],n.onerror)){if(s(c[0])!==!0)return;c=[null]}var h=e(t.ctx,t.callback,c);return h.error&&s(h.error)!==!0?void 0:null==h.value?o(null):(i=l(h.value),r(i)?(h=e(t.ctx,i,[o]),h.error?s(h.error):null):o(null,i))}function f(u){function e(n){return o(function(r){return c(n,r)})}function c(n,r){var t={ctx:n.ctx,next:null,result:null,callback:null};if(n.result!==!1)return n.callback=r,n.next=t,n.result&&a(s,n),e(t)}function f(n){var t={ctx:this===f?null:this,next:null,result:null,callback:null};return n=l(n),r(n)?a(s,{ctx:t.ctx,next:t,result:[null],callback:function(){return n}},!0):t.result=null==n?[null]:[null,n],e(t)}var s={onerror:null,debug:null};return n(u)?s.onerror=u:u&&(n(u.debug)&&(s.debug=u.debug),n(u.onerror)&&(s.onerror=u.onerror)),f.all=function(n){return f.call(this,i(n))},f.digest=function(){var n=arguments;return f.call(this,function(r){r.apply(null,n)})},f.thunkify=function(n){var r=this===f?null:this;return function(){var u=t(arguments);return f.call(r||this,function(r){u.push(r),n.apply(this,u)})}},f.delay=function(n){return f.call(this,function(r){setTimeout(r,n)})},f}var s={},h=Object.prototype.toString,v=Array.isArray||function(n){return"[object Array]"===h.call(n)};return f.NAME="thunks",f.VERSION="v1.3.2",f});